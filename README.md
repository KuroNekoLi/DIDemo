大家好，歡迎回來。在某些情況下，我們可能會將介面作為依賴，而不是類別。

為了向大家展示如何使用介面，我要把這個電池類別改成一個介面。

介面沒有建構子，所以讓我們把這個刪掉。

然後我們需要把這個函數設為抽象的。

現在在這個SmartPhone的建構子中，我們有一個Battery參數，但現在

Battery已經是一個介面了。

如果我們現在運行這個應用

它將不能運行。因為在這一點上，我們無法構造一個電池。

我們需要創建一個類別

去實現這個電池介面，並通過模塊提供依賴。

所以讓我們創建一個新的Kotlin類別。將其命名為

鎳鎘電池

它應該實現電池介面。

然後實現getPower函數。

讓我們加入一個日誌。

在這裡，我將使用與smartphone類別相同的標籤。

我們應該用@Inject註解來註解這個類別的建構子。

如果我們現在嘗試運行這個專案，Android studio將會顯示一個錯誤訊息。

在這裡，我們有一個鎳鎘電池的依賴。因為它已經實現了電池介面，我們知道

這是一個電池。

但是dagger還不知道。Dagger並不會

這樣為依賴類別做類別轉換。

我們必須創建一個模塊，並將這個鎳鎘電池依賴作為電池依賴提供。

所以，讓我們為模塊創建一個新的Kotlin類別。

將其命名為NCBatteryModule。

用@Module

註解來註解這個。

現在讓我們創建一個提供者函數

名為providesNCBattery。

返回類型應該是Battery。

我們可以直接構造一個新的鎳鎘電池實例並以此方式返回它。但這是

不必要的。

因為我們已經用@Inject註解註解了鎳鎘電池的建構子，dagger可以

構建那個依賴。

所以我們可以在這裡直接使用那個依賴，

我們不必再次構造它。

我們也應該將這個提供者函數用提供者註解註解

現在。

此函數將返回一個類型轉換為電池實例的鎳鎘電池實例。Dagger會識別

這。

返回的依賴是根據提供者函數的返回類型來識別的。

因此，Dagger將認出這個依賴是一個電池。

現在讓我們回到

SmartPhoneComponent介面。

在這裡，我們需要將我們新創建的模塊添加到模塊列表中。

所以，這就是我們如何使用介面類型作為依賴。讓我們運行應用程序，看看它是如何運作的。

讓我們準備好logcat，看看結果。然後運行應用程序。

你可以看到這個新的日誌結果。"來自鎳鎘電池的電力" 其實我們可以讓這段代碼更加

簡練。在我們的應用中，我們已經將鎳鎘電池類別的建構子

用inject註解註解。

因此，我們不需要為這個提供者函數提供一個主體。所以我們可以將這個模塊定義為一個

抽象模塊。然後將這個函數設為抽象的。並且刪除函數體。

在dagger中

抽象函數不能用@Provides註解註解。但是dagger提供了一個選項去

用

@Binds註解註解它們。讓我們

也改變函數的名稱。

現在，我將再次運行應用，看看這個新變更如何影響。

好的，應用運行得和以前一樣好。

所以，在這節課中，你學到了如何使用介面類型。

這非常簡單，

你需要做的就是創建一個實現該介面的類別，然後創建一個模塊來

提供該類別的一個實例。

這就是這節課的內容。

在下一節課。

我們來談談，另一種將依賴注入到主活動的方式。非常感謝你的聆聽。

很快再見，我們將帶來下一節課。